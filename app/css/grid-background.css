/* 网格背景效果 */
:root {
  --grid-size: 20px;
  --grid-color: rgba(0, 0, 0, 0.03);
  --grid-color-dark: rgba(255, 255, 255, 0.03);
  /* 导航栏上的网格颜色（稍微明显一些） */
  --grid-color-nav: rgba(0, 0, 0, 0.05);
  --grid-color-nav-dark: rgba(255, 255, 255, 0.05);
  /* 卡片和按钮上的网格颜色 */
  --grid-color-card: rgba(0, 0, 0, 0.04);
  --grid-color-card-dark: rgba(255, 255, 255, 0.04);
}

/* 网格背景的通用样式 */
.grid-background {
  background-image: 
    linear-gradient(var(--grid-color) 1px, transparent 1px),
    linear-gradient(90deg, var(--grid-color) 1px, transparent 1px);
  background-size: var(--grid-size) var(--grid-size);
  background-position: 0 0, 0 0;
}

/* 为 body、code 或主容器添加网格背景 */
body,code {
  background-image: 
    linear-gradient(var(--grid-color) 1px, transparent 1px),
    linear-gradient(90deg, var(--grid-color) 1px, transparent 1px);
  background-size: var(--grid-size) var(--grid-size);
  background-position: 0 0, 0 0;
}

/* 为导航栏及其内部容器添加网格背景 */
header[aria-label="Main"]::before,
header.sticky::before,
header[id*="nav"]::before,
header#nd-nav::before,
header#nd-subnav::before,
header[aria-label="Main"] .backdrop-blur-lg:not(.shiki):not(figure):not(pre):not(code)::before,
header.sticky .backdrop-blur-lg:not(.shiki):not(figure):not(pre):not(code)::before,
header[id*="nav"] .backdrop-blur-lg:not(.shiki):not(figure):not(pre):not(code)::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: 
    linear-gradient(var(--grid-color-nav) 1px, transparent 1px),
    linear-gradient(90deg, var(--grid-color-nav) 1px, transparent 1px);
  background-size: var(--grid-size) var(--grid-size);
  background-position: 0 0, 0 0;
  pointer-events: none;
  z-index: 0;
}

/* 卡片和按钮的透明背景和网格效果 */
.bg-fd-card,
[class*="bg-fd-card"] {
  position: relative;
  background-color: rgba(255, 255, 255, 0.4) !important;
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

.bg-foreground,
[class*="bg-foreground"] {
  position: relative;
  background-color: rgba(255, 255, 255, 0.5) !important;
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

/* 夜间模式下隐藏网格背景 */
.dark body,
.dark .grid-background,
.dark code,
.dark pre,
.dark .shiki,
.dark .shiki pre,
.dark .shiki code,
.dark header[aria-label="Main"]::before,
.dark header.sticky::before,
.dark header[id*="nav"]::before,
.dark header#nd-nav::before,
.dark header#nd-subnav::before,
.dark header[aria-label="Main"] .backdrop-blur-lg:not(.shiki):not(figure):not(pre):not(code)::before,
.dark header.sticky .backdrop-blur-lg:not(.shiki):not(figure):not(pre):not(code)::before,
.dark header[id*="nav"] .backdrop-blur-lg:not(.shiki):not(figure):not(pre):not(code)::before {
  background-image: none !important;
}

/* 夜间模式下调整卡片和按钮的背景色 */
.dark .bg-fd-card,
.dark [class*="bg-fd-card"] {
  background-color: rgba(17, 24, 39, 0.6) !important;
}

.dark .bg-foreground,
.dark [class*="bg-foreground"] {
  background-color: rgba(31, 41, 55, 0.7) !important;
}

